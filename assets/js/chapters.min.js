class ChapterTimeline extends(videojs.getComponent("Component")){constructor(e,t={}){super(e,t),t.left&&t.width&&this.setPosition(t.left,t.width)}createEl(){const e=videojs.dom.createEl("div",{className:"vjs-chapter-timeline"}),t=videojs.dom.createEl("div",{className:"vjs-chapter-timeline-progress"});return e.append(t),e}setPosition(e,t){this.el().style.left=e,this.el().style.width=t}updateProgress(e){this.el().querySelector(".vjs-chapter-timeline-progress").style.width=`${e}%`}}function chaptersTimeline(){const e=this,t=()=>[].filter.call(e.textTracks(),(e=>"chapters"===e.kind)),i=()=>{const t=e.getChild("controlBar").getChild("progressControl").getChild("seekBar").getChild("mouseTimeDisplay").getChild("timeTooltip");t.update=function(i,o,r){const s=(t=>{const i=[].filter.call(e.textTracks(),(e=>"chapters"===e.kind)),o=i?.[0]?.cues;if(o){for(let e=0;e<o.length;e++){const i=o[e];if(t>=i.startTime&&t<=i.endTime)return i}return null}})(o*e.duration());s?(t.el().classList.add("vjs-time-tooltip-with-chapter-title"),t.el().innerHTML=`<span class="vjs-time-tooltip-chapter-title">${s.text}</span>${r}`):(t.write(r),t.el().classList.remove("vjs-time-tooltip-with-chapter-title"))}},o=i=>{const o=e.getChild("controlBar").getChild("progressControl"),r=e.getChild("controlBar").getChild("progressControl").getChild("seekBar").calculateDistance(i)*e.duration(),s=t(),l=s?.[0]?.cues,n=o.el().querySelectorAll(".vjs-chapter-timeline");l&&[].forEach.call(l,((e,t)=>{const i=n[t];i&&(r>=e.startTime&&r<=e.endTime?i.classList.add("vjs-chapter-timeline-current"):i.classList.remove("vjs-chapter-timeline-current"))}))},r=()=>{const t=e.getChild("controlBar").getChild("progressControl");t.el().querySelectorAll(".vjs-chapter-timeline")?.forEach((e=>{e.classList.remove("vjs-chapter-timeline-current")}))},s=()=>{const i=e.currentTime(),o=t(),r=o?.[0]?.cues;if(!r)return;const s=e.getChild("controlBar").getChild("progressControl").el().querySelectorAll(".vjs-chapter-timeline");[].forEach.call(r,((e,t)=>{const o=s[t];if(o){const t=o.querySelector(".vjs-chapter-timeline-progress");if(i>=e.endTime)t.style.width="100%";else if(i>=e.startTime&&i<=e.endTime){const o=(i-e.startTime)/(e.endTime-e.startTime)*100;t.style.width=`${o}%`}else t.style.width="0%"}}))},l=()=>{const o=t(),r=o?.[0]?.cues,s=e.getChild("controlBar").getChild("progressControl").getChild("seekBar");if(s.el().querySelectorAll(".vjs-chapter-timeline").forEach((e=>{e.remove()})),!r)return;const l=e.duration();[].forEach.call(r,(t=>{const i=t.startTime/l*100,o=t.endTime/l*100,r=new ChapterTimeline(e,{left:`${i}%`,width:o-i+"%"});s.addChild(r)})),i()};e.on("loadedmetadata",(()=>{setTimeout((()=>{l()}),500);const t=e.getChild("controlBar").getChild("progressControl");t.on("mousemove",o),t.on("touchmove",o),t.on("mouseout",r)})),e.on("timeupdate",s),e.on("dispose",(()=>{e.off("loadedmetadata",l),e.off("timeupdate",s);const t=e.getChild("controlBar").getChild("progressControl");t.off("mousemove",o),t.off("touchmove",o),t.off("mouseout",r)}))}videojs.registerComponent("ChapterTimeline",ChapterTimeline),videojs.registerPlugin("chaptersTimeline",chaptersTimeline);